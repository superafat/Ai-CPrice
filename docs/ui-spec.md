# UI 規格與字串清單

## 設計原則

### 行動優先設計
- **響應式佈局**: 支援 320px - 1920px 寬度
- **觸控友善**: 按鈕最小 44px，間距充足
- **安全區域**: 適配 iOS 瀏海屏與 Android 手勢導航
- **快速載入**: 關鍵路徑優化，首屏 < 2s

### 無障礙設計
- **鍵盤導航**: 完整鍵盤操作支援
- **螢幕閱讀器**: 語義化 HTML 與 ARIA 標籤
- **色彩對比**: 符合 WCAG AA 標準
- **字體大小**: 支援系統字體縮放

## 頁面規格

### 1. 首頁 (/)

#### 佈局結構
```
┌─────────────────────────────────────┐
│ 導航欄                               │
├─────────────────────────────────────┤
│ Hero 區塊                           │
│ - 主標題                            │
│ - 描述文字                          │
│ - CTA 按鈕組                        │
├─────────────────────────────────────┤
│ 功能特色 (3欄網格)                   │
├─────────────────────────────────────┤
│ 工作流程 (4步驟)                     │
├─────────────────────────────────────┤
│ 技術規格                            │
└─────────────────────────────────────┘
```

#### 關鍵元素
- **主標題**: "OCR 數學題目解析系統"
- **CTA 按鈕**: "開始上傳" (主要), "查看統計" (次要)
- **特色卡片**: 智慧上傳、雙引擎 OCR、Word 匯出

### 2. 上傳頁面 (/upload)

#### 佈局結構
```
┌─────────────────────────────────────┐
│ 頁面標題與描述                       │
├─────────────────────────────────────┤
│ 拖拽上傳區域                        │
│ - 拖拽指示                          │
│ - 格式說明                          │
├─────────────────────────────────────┤
│ 已選檔案資訊 (條件顯示)              │
│ - 檔案名稱與大小                    │
│ - 多題檢測警告                      │
├─────────────────────────────────────┤
│ 操作按鈕組                          │
│ - 拍攝建議                          │
│ - 開始處理                          │
├─────────────────────────────────────┤
│ 功能說明                            │
└─────────────────────────────────────┘
```

#### 互動行為
- **拖拽狀態**: 邊框變色，背景高亮
- **多題警告**: 橘色提示框，建議裁切
- **處理按鈕**: 載入狀態，禁用重複點擊

### 3. 處理頁面 (/processing/:taskId)

#### 狀態指示器
```
階段名稱          圖示        顏色       動畫
檔案已上傳        CheckCircle  green     -
影像前處理中      Loader      blue      spin
切塊分析中        Loader      blue      spin  
區塊分類中        Loader      blue      spin
OCR 識別中        Loader      blue      spin
標準化處理中      Loader      blue      spin
處理完成          CheckCircle  green     -
處理失敗          AlertCircle  red       -
```

#### 區塊處理詳情
- **狀態指示**: 彩色圓點 + 文字說明
- **信心度**: 百分比顯示
- **重試按鈕**: "重試" / "高畫質重試"
- **即時更新**: WebSocket 或輪詢

### 4. 預覽頁面 (/preview/:taskId)

#### 內容區塊
```
┌─────────────────────────────────────┐
│ 統計卡片 (4欄)                      │
│ - 總區塊數                          │
│ - 成功識別                          │
│ - 需要修正                          │
│ - 處理時間                          │
├─────────────────────────────────────┤
│ 識別結果                            │
│ ┌─ 題幹 ─────────────────────────┐   │
│ │ 內容 + 信心度標示 + 編輯按鈕    │   │
│ └─────────────────────────────────┘   │
│ ┌─ 選項 ─────────────────────────┐   │
│ │ 選項列表 + 信心度標示           │   │
│ └─────────────────────────────────┘   │
│ ┌─ 詳解 ─────────────────────────┐   │
│ │ 解析內容 + 公式渲染             │   │
│ └─────────────────────────────────┘   │
├─────────────────────────────────────┤
│ 操作按鈕                            │
│ - 上傳新題目                        │
│ - 匯出 Word 文檔                    │
└─────────────────────────────────────┘
```

#### 信心度標示
- **高信心 (≥90%)**: 綠色標籤
- **中信心 (70-89%)**: 橘色標籤  
- **低信心 (<70%)**: 紅色標籤 + 編輯按鈕

#### 公式渲染
- 使用 KaTeX 即時渲染
- 渲染失敗顯示原始 LaTeX
- 支援行內和區塊公式

### 5. 匯出頁面 (/export/:taskId)

#### 三欄佈局
```
┌─────────┬─────────────────────────────┐
│ 設定面板 │ 預覽區域                     │
│         │                             │
│ 字級設定 │ ┌─ 題目 (11pt) ──────────┐   │
│ 圖片設定 │ │ 題幹內容...            │   │
│ 匯出按鈕 │ └─────────────────────────┘   │
│         │ ┌─ 選項 (11pt) ──────────┐   │
│         │ │ (A) 選項 A             │   │
│         │ │ (B) 選項 B             │   │
│         │ └─────────────────────────┘   │
│         │ ┌─ 解析 (9pt) ───────────┐   │
│         │ │ 詳解內容...            │   │
│         │ └─────────────────────────┘   │
└─────────┴─────────────────────────────┘
```

#### 設定控制項
- **字級滑桿**: 8-16pt，步進 1pt
- **即時預覽**: 設定變更立即反映
- **圖片開關**: 圖說顯示/隱藏
- **記住設定**: 儲存使用者偏好

### 6. 管理頁面 (/management)

#### 儀表板佈局
```
┌─────────────────────────────────────┐
│ 概覽統計 (4個指標卡片)               │
├─────────────────┬───────────────────┤
│ OCR 引擎效能     │ 資源使用狀況       │
│ - 文字識別成功率  │ - Mathpix 配額    │
│ - 公式識別成功率  │ - 磁碟使用量      │
│ - 備援使用率     │ - 記憶體使用量     │
│ - 兜底使用率     │                   │
├─────────────────┴───────────────────┤
│ 最近錯誤清單                        │
├─────────────────────────────────────┤
│ 系統設定與快速操作                   │
└─────────────────────────────────────┘
```

## 彈窗規格

### 裁切工具彈窗
- **最高 z-index**: z-100
- **全屏遮罩**: 半透明黑色背景
- **內容區域**: 最大 90vh，可滾動
- **操作按鈕**: 取消、完成裁切
- **安全區域**: 避免被系統 UI 遮擋

### 拍攝指南彈窗
- **分類展示**: 建議做法 vs 避免事項
- **視覺化說明**: 圖示 + 文字描述
- **技術規格**: 解析度、格式、環境要求

### 設定對話框
- **即時預覽**: 設定變更立即生效
- **驗證提示**: 無效設定的即時提示
- **預設值**: 記住使用者上次選擇

## 字串清單

### 成功訊息
```
"檔案上傳成功，正在處理中..."
"已辨識完成，公式將以標準格式顯示"
"Word 文檔匯出成功！"
"重試成功"
"修改已儲存"
"裁切完成"
```

### 建議訊息
```
"偵測到多個題目，建議裁成單題可提升準確率與速度"
"影像對比偏低，建議改用高畫質重試"
"建議詳解字級小於題幹字級以提升可讀性"
```

### 處理狀態
```
"檔案已上傳"
"影像前處理中" 
"切塊分析中"
"區塊分類中"
"OCR 識別中"
"我們正以更高品質與備援引擎為您處理..."
"標準化處理中"
"處理完成"
```

### 兜底提示
```
"為確保準確度，系統將以高精度引擎再次確認（不額外收費）"
"正在使用進階引擎重新處理..."
```

### 錯誤訊息
```
"不支援的檔案格式。支援格式: JPG, PNG, WebP, PDF"
"檔案大小超過 50MB 限制"
"影像品質過低，無法識別"
"OCR 處理失敗，請重試"
"LaTeX 語法有誤"
"匯出失敗，請重試"
"網路連線異常"
"系統暫時無法使用"
```

### 操作指引
```
"拖拽檔案到此處，或點擊選擇檔案"
"檢查識別結果，可手動修正低信心區塊"
"調整字體大小與版面設定，即時預覽效果"
"拖拽選擇要保留的區域，建議包含完整的單一題目"
```

### 技術提示
```
"使用自然光或充足室內光"
"手機與紙面平行"
"避免陰影遮擋"
"確保題目邊界完整"
"預留適當邊距"
"避免裁切重要內容"
```

## 色彩規範

### 主色調
- **Primary**: #3b82f6 (藍色)
- **Success**: #22c55e (綠色)
- **Warning**: #f59e0b (橘色)
- **Error**: #ef4444 (紅色)
- **Gray**: #6b7280 (中性灰)

### 信心度色彩
- **高信心**: #22c55e (綠色)
- **中信心**: #f59e0b (橘色)
- **低信心**: #ef4444 (紅色)

### 狀態色彩
- **處理中**: #3b82f6 (藍色)
- **成功**: #22c55e (綠色)
- **失敗**: #ef4444 (紅色)
- **等待**: #6b7280 (灰色)

## 圖示規範

### 使用 Lucide React 圖示庫
- **上傳**: Upload
- **檔案**: FileText, Image
- **處理**: Loader (with spin), CheckCircle, AlertCircle
- **編輯**: Edit3, Settings
- **下載**: Download
- **重試**: RefreshCw
- **管理**: BarChart3, Activity

### 圖示大小
- **導航**: 20px (h-5 w-5)
- **按鈕**: 16px (h-4 w-4)
- **狀態**: 20px (h-5 w-5)
- **大圖示**: 48px (h-12 w-12)

## 動畫規範

### 載入動畫
- **旋轉**: `animate-spin` (Loader 圖示)
- **脈衝**: `animate-pulse` (載入狀態)
- **自訂**: `animate-pulse-slow` (2秒週期)

### 過渡動畫
- **顏色變化**: `transition-colors` (200ms)
- **大小變化**: `transition-all` (200ms)
- **透明度**: `transition-opacity` (150ms)

### 減少動畫支援
```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
```

## 表單規範

### 輸入框樣式
- **基礎**: `form-input` class
- **聚焦**: 藍色邊框 + 陰影
- **錯誤**: 紅色邊框
- **禁用**: 灰色背景

### 按鈕樣式
- **主要**: `btn-primary` (藍色背景)
- **次要**: `btn-secondary` (白色背景 + 邊框)
- **危險**: 紅色背景
- **禁用**: 灰色背景 + 不可點擊

### 滑桿控制項
- **字級滑桿**: 8-16 範圍，步進 1
- **即時回饋**: 數值顯示 + 預覽更新
- **觸控優化**: 大拇指區域，易於操作

## 錯誤處理 UI

### Toast 通知
- **位置**: 頂部中央
- **持續時間**: 4 秒
- **類型**: 成功、警告、錯誤、資訊

### 錯誤頁面
- **404**: 友善的找不到頁面提示
- **500**: 系統錯誤，提供重試選項
- **網路錯誤**: 連線問題提示

### 載入狀態
- **骨架屏**: 內容載入時的佔位符
- **進度條**: 長時間處理的進度顯示
- **狀態文字**: 描述當前處理階段

## 行動裝置優化

### 觸控操作
- **最小點擊區域**: 44×44px
- **手勢支援**: 滑動、縮放（圖片預覽）
- **安全邊距**: 避免意外觸發

### 螢幕適配
```css
/* 小螢幕 (<640px) */
@media (max-width: 640px) {
  /* 單欄佈局 */
  /* 較大字體 */
  /* 簡化導航 */
}

/* 中等螢幕 (640-1024px) */
@media (min-width: 640px) and (max-width: 1024px) {
  /* 兩欄佈局 */
  /* 平板優化 */
}

/* 大螢幕 (>1024px) */
@media (min-width: 1024px) {
  /* 三欄佈局 */
  /* 桌面優化 */
}
```

### 效能優化
- **圖片懶載入**: Intersection Observer
- **程式碼分割**: 路由層級分割
- **資源壓縮**: Gzip + 快取策略

## 無障礙規範

### 語義化 HTML
```html
<main role="main">
  <section aria-labelledby="upload-title">
    <h2 id="upload-title">檔案上傳</h2>
    <form aria-describedby="upload-help">
      <input type="file" aria-label="選擇題目圖片" />
      <p id="upload-help">支援 JPG、PNG、PDF 格式</p>
    </form>
  </section>
</main>
```

### ARIA 標籤
- **aria-label**: 描述性標籤
- **aria-describedby**: 額外說明
- **aria-live**: 動態內容更新
- **role**: 元素角色定義

### 鍵盤導航
- **Tab 順序**: 邏輯導航順序
- **焦點指示**: 清楚的焦點樣式
- **快捷鍵**: 主要操作的鍵盤快捷鍵
- **跳過連結**: 快速跳到主內容

## 國際化準備

### 字串外部化
- 所有顯示文字存放在語言檔案
- 支援繁體中文（預設）
- 預留英文介面擴充

### 文字方向
- **主要**: 由左到右 (LTR)
- **數學公式**: 保持 LaTeX 原始方向
- **圖片說明**: 跟隨主要文字方向